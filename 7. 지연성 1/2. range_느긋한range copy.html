<script src="./fx.js"></script>

<script>
	const add = (a, b) => a + b;

	line('일반적인 range');

	const range = l => {
		let i = -1;
		let res = [];
		while (++i < l) {
			log(i + ' range');
			res.push(i);
		}

		return res;
	};

	// log(range(5));
	// log(range(2));

	var list = range(4);

	log(list);

	//log(reduce(add, list));

	line('느긋한(lazy) range');
	const L = {};

	L.range = function*(l) {
		let i = -1;

		while (++i < l) {
			log(i + ' L.range');
			yield i;
		}
	};

	console;

	// list 이터레이터
	var list = L.range(4);

	// 느긋한 range 는 log 를 찍었을 때 next() 를 수행하기 전까지는 L.range 로 찍히지 않는다.
	// yield로 반환되는 이터레이터 값을 가지는 range 는 실제로 코드가 평가가 이루어지기 전까지는
	// 수행하지 않는다.
	log(list);

	// reduce 에서 next() 를 통해 L.range 의 평가가 이루어지기 때문에
	// 여기선 로그로 L.range가 찍힌다. 즉, 여기서 실제 코드의 수행이 이루어 진다.
	log(reduce(add, list));
</script>
